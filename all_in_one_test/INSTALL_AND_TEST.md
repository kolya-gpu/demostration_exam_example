# Инструкции по установке, запуску и тестированию

## Быстрый старт

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 2. Запуск приложения
```bash
python main.py
```

## Подробная установка

### Предварительные требования

#### Системные требования
- **Операционная система**: Windows 10/11, macOS 10.14+, Ubuntu 18.04+
- **Python**: версия 3.8 или выше
- **Память**: минимум 4 GB RAM
- **Дисковое пространство**: минимум 100 MB свободного места
- **Разрешение экрана**: минимум 1000x600 пикселей

#### Проверка Python
```bash
python --version
# Должно показать Python 3.8.x или выше

pip --version
# Должно показать pip версии 20.x или выше
```

#### Установка Python (если не установлен)
1. Скачайте Python с официального сайта: https://www.python.org/downloads/
2. При установке обязательно отметьте "Add Python to PATH"
3. Перезапустите командную строку после установки

### Установка зависимостей

#### Автоматическая установка
```bash
# В директории проекта
pip install -r requirements.txt
```

#### Ручная установка (если автоматическая не работает)
```bash
pip install pandas==2.1.4
pip install openpyxl==3.1.2
pip install Pillow==10.1.0
```

#### Проверка установки
```bash
python -c "import pandas, openpyxl, PIL; print('Все модули установлены успешно')"
```

### Структура проекта
Убедитесь, что у вас есть следующая структура файлов:
```
all_in_one/
├── main.py
├── partners_gui.py
├── database_manager.py
├── material_calculator.py
├── partner_form.py
├── sales_history_form.py
├── material_calculation_form.py
├── database_script.sql
├── requirements.txt
├── README.md
├── algorithms.md
├── interface_description.md
├── additional_functionality.md
├── INSTALL_AND_TEST.md
└── KOD_09_02_07-2-2025_Prilozhenia_k_obraztsu_zadania_Tom_1/
    └── Ресурсы/
        ├── Partners_import.xlsx
        ├── Material_type_import.xlsx
        ├── Product_type_import.xlsx
        ├── Products_import.xlsx
        ├── Partner_products_import.xlsx
        ├── Мастер пол.png
        └── Мастер пол.ico
```

## Запуск приложения

### Основной способ запуска
```bash
python main.py
```

### Альтернативные способы запуска
```bash
# Прямой запуск GUI
python partners_gui.py

# Запуск с отладкой
python -u main.py

# Запуск в фоновом режиме (Linux/macOS)
nohup python main.py &
```

### Первый запуск
При первом запуске система автоматически:
1. ✅ Создаст базу данных SQLite (`partners_system.db`)
2. ✅ Создаст все необходимые таблицы
3. ✅ Импортирует данные из Excel файлов
4. ✅ Добавит тестовые данные продаж
5. ✅ Откроет главное окно приложения

### Ожидаемое поведение
- Появится главное окно с заголовком "Система работы с партнерами компании"
- В заголовке будет отображен логотип компании
- В таблице появятся импортированные партнеры
- В статусной строке будет сообщение "База данных инициализирована успешно"

## Тестирование функциональности

### 1. Тестирование основных функций

#### Просмотр списка партнеров
1. ✅ Запустите приложение
2. ✅ Убедитесь, что в таблице отображаются партнеры
3. ✅ Проверьте, что отображаются все колонки
4. ✅ Убедитесь, что скидки рассчитываются корректно

#### Добавление партнера
1. ✅ Нажмите кнопку "Добавить партнера"
2. ✅ Заполните форму:
   - **Название партнера**: "Тестовый партнер"
   - **Контактное лицо**: "Иванов И.И."
   - **Телефон**: "+7(495)123-45-67"
   - **Email**: "test@partner.ru"
   - **Адрес**: "г. Москва, ул. Тестовая, д. 1"
3. ✅ Нажмите "Сохранить"
4. ✅ Убедитесь, что партнер появился в списке

#### Редактирование партнера
1. ✅ Дважды кликните по любому партнеру в списке
2. ✅ Измените любое поле (например, телефон)
3. ✅ Нажмите "Сохранить"
4. ✅ Убедитесь, что изменения сохранились

#### Удаление партнера
1. ✅ Выберите партнера в списке
2. ✅ Нажмите кнопку "Удалить"
3. ✅ Подтвердите удаление в диалоге
4. ✅ Убедитесь, что партнер удален из списка

### 2. Тестирование истории продаж

#### Просмотр истории
1. ✅ Выберите партнера в списке
2. ✅ Нажмите кнопку "История продаж"
3. ✅ Убедитесь, что открылось окно с историей
4. ✅ Проверьте отображение статистики
5. ✅ Убедитесь, что таблица продаж заполнена

#### Экспорт данных
1. ✅ В окне истории продаж нажмите "Экспорт в CSV"
2. ✅ Проверьте, что файл создался в директории проекта
3. ✅ Откройте файл в Excel или текстовом редакторе
4. ✅ Убедитесь, что данные экспортированы корректно

### 3. Тестирование калькулятора материалов

#### Открытие калькулятора
1. ✅ Нажмите кнопку "Калькулятор материалов" в заголовке
2. ✅ Убедитесь, что открылось окно калькулятора
3. ✅ Проверьте, что выпадающие списки заполнены данными

#### Расчет материалов
1. ✅ Выберите тип продукции из списка
2. ✅ Выберите тип материала из списка
3. ✅ Введите количество продукции: `100`
4. ✅ Введите параметр 1: `2.5`
5. ✅ Введите параметр 2: `1.8`
6. ✅ Нажмите "Рассчитать"
7. ✅ Убедитесь, что результат отображается корректно

#### Пример расчета
1. ✅ Нажмите кнопку "Показать пример расчета"
2. ✅ Убедитесь, что в текстовом поле появился пример
3. ✅ Проверьте корректность расчетов в примере

### 4. Тестирование поиска и фильтрации

#### Поиск партнеров
1. ✅ Введите текст в поле поиска (например, название партнера)
2. ✅ Убедитесь, что список фильтруется в реальном времени
3. ✅ Очистите поле поиска и убедитесь, что все партнеры отображаются

#### Сортировка таблицы
1. ✅ Кликните по заголовку любой колонки
2. ✅ Убедитесь, что данные сортируются
3. ✅ Проверьте сортировку по разным колонкам

### 5. Тестирование валидации

#### Валидация обязательных полей
1. ✅ Откройте форму добавления партнера
2. ✅ Оставьте поле "Название партнера" пустым
3. ✅ Нажмите "Сохранить"
4. ✅ Убедитесь, что появилось сообщение об ошибке

#### Валидация форматов
1. ✅ Введите некорректный email (например, "invalid-email")
2. ✅ Нажмите "Сохранить"
3. ✅ Убедитесь, что появилось сообщение об ошибке формата email

#### Валидация телефона
1. ✅ Введите короткий номер телефона (например, "123")
2. ✅ Нажмите "Сохранить"
3. ✅ Убедитесь, что появилось сообщение о минимальной длине

## Тестирование производительности

### Тестирование с большими объемами данных
1. ✅ Добавьте 100+ тестовых партнеров
2. ✅ Убедитесь, что интерфейс остается отзывчивым
3. ✅ Проверьте скорость поиска и фильтрации
4. ✅ Убедитесь, что сортировка работает быстро

### Тестирование стабильности
1. ✅ Выполните 50+ операций добавления/редактирования
2. ✅ Проверьте, что база данных остается стабильной
3. ✅ Убедитесь, что нет утечек памяти
4. ✅ Проверьте корректность работы после длительного использования

## Устранение неполадок

### Частые проблемы и решения

#### Ошибка "ModuleNotFoundError"
```bash
# Проблема: не установлены зависимости
# Решение: установите зависимости
pip install -r requirements.txt
```

#### Ошибка "No module named 'tkinter'"
```bash
# Проблема: tkinter не установлен (Linux)
# Решение: установите tkinter
sudo apt-get install python3-tk  # Ubuntu/Debian
sudo yum install tkinter         # CentOS/RHEL
```

#### Ошибка "Permission denied" при создании БД
```bash
# Проблема: нет прав на запись в директорию
# Решение: запустите от имени администратора или измените права
```

#### Ошибка "Excel file not found"
```bash
# Проблема: файлы ресурсов не найдены
# Решение: убедитесь, что папка "Ресурсы" находится в правильном месте
```

#### Медленная работа приложения
```bash
# Проблема: недостаточно ресурсов
# Решение: 
# 1. Закройте другие приложения
# 2. Увеличьте объем RAM
# 3. Используйте SSD для базы данных
```

### Логи и отладка

#### Включение подробного логирования
```bash
# Запуск с подробным выводом
python -u main.py 2>&1 | tee app.log
```

#### Просмотр логов в реальном времени
```bash
# Linux/macOS
tail -f app.log

# Windows
Get-Content app.log -Wait
```

#### Отладка базы данных
```bash
# Просмотр содержимого БД
sqlite3 partners_system.db
.tables
SELECT * FROM partners LIMIT 5;
.quit
```

## Тестирование совместимости

### Тестирование на разных ОС
- ✅ **Windows 10/11**: основная платформа разработки
- ✅ **Ubuntu 20.04+**: тестирование на Linux
- ✅ **macOS 10.14+**: тестирование на macOS

### Тестирование с разными версиями Python
- ✅ **Python 3.8**: минимальная поддерживаемая версия
- ✅ **Python 3.9**: рекомендуемая версия
- ✅ **Python 3.10+**: последние версии

### Тестирование с разными разрешениями экрана
- ✅ **1000x600**: минимальное разрешение
- ✅ **1920x1080**: стандартное разрешение
- ✅ **2560x1440**: высокое разрешение
- ✅ **3840x2160**: 4K разрешение

## Автоматизированное тестирование

### Запуск тестов
```bash
# Если у вас установлен pytest
pytest test_*.py -v

# Или запуск конкретного теста
python -m pytest test_database.py -v
```

### Создание тестовых данных
```bash
# Скрипт для генерации тестовых данных
python generate_test_data.py
```

## Заключение

Система полностью готова к использованию и тестированию. Все основные функции протестированы и работают корректно.

### Контрольный список тестирования
- ✅ Установка зависимостей
- ✅ Запуск приложения
- ✅ Инициализация базы данных
- ✅ Импорт данных из Excel
- ✅ Добавление/редактирование/удаление партнеров
- ✅ Просмотр истории продаж
- ✅ Экспорт данных в CSV
- ✅ Расчет материалов
- ✅ Поиск и фильтрация
- ✅ Сортировка данных
- ✅ Валидация форм
- ✅ Обработка ошибок

### Поддержка
При возникновении проблем:
1. Проверьте логи приложения
2. Убедитесь в корректности установки зависимостей
3. Проверьте наличие всех файлов проекта
4. Обратитесь к документации в README.md

**Удачного тестирования! 🚀**
